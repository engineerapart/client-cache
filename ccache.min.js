!function(a,b){"function"==typeof define&&define.amd?define([],b):"undefined"!=typeof module&&module.exports?module.exports=b():a.ccache=b()}(this,function(){function a(){var a="__ccachetest__",c=a;if(void 0!==n)return n;try{if(!localStorage)return!1}catch(a){return!1}try{h(a,c),i(a),n=!0}catch(a){n=!(!b(a)||!localStorage.length)}return n}function b(a){return a&&("QUOTA_EXCEEDED_ERR"===a.name||"NS_ERROR_DOM_QUOTA_REACHED"===a.name||"QuotaExceededError"===a.name)}function c(){return void 0===o&&(o=null!=window.JSON),o}function d(a){return a.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&")}function e(a){return a+q}function f(){return(new Date).getTime()}function g(a){return localStorage.getItem(p+t+a)}function h(a,b){localStorage.removeItem(p+t+a),localStorage.setItem(p+t+a,b)}function i(a){localStorage.removeItem(p+t+a)}function j(a){for(var b=new RegExp("^"+p+d(t)+"(.*)"),c=localStorage.length-1;c>=0;--c){var f=localStorage.key(c);f=f&&f.match(b),f=f&&f[1],f&&f.indexOf(q)<0&&a(f,e(f))}}function k(a){var b=e(a);i(a),i(b)}function l(a){var b=e(a),c=g(b);if(c){var d=parseInt(c,r);if(f()>=d)return i(a),i(b),!0}}function m(a,b){u&&"console"in window&&"function"==typeof window.console.warn&&(window.console.warn("ccache - "+a),b&&window.console.warn("ccache - The error was: "+b.message))}var n,o,p="ccache-",q="-cacheexpiration",r=10,s=Math.floor(864e13),t="",u=!1,v={set:function(d,l,n){if(a()){var o=l;if(c()){try{o=JSON.stringify(l)}catch(a){return}try{h(d,o)}catch(a){if(!b(a))return void m("Could not add item with key '"+d+"'",a);var p,q=[];j(function(a,b){var c=g(b);c=c?parseInt(c,r):s,q.push({key:a,size:(g(a)||"").length,expiration:c})}),q.sort(function(a,b){return b.expiration-a.expiration});for(var t=(o||"").length;q.length&&t>0;)p=q.pop(),m("Cache is full, removing item with key '"+d+"'"),k(p.key),t-=p.size;try{h(d,o)}catch(a){return void m("Could not add item with key '"+d+"', perhaps it's too big?",a)}}n?h(e(d),(f()+n).toString(r)):i(e(d))}}},get:function(b){if(!a())return null;if(l(b))return null;var d=g(b);if(!d||!c())return d;try{return JSON.parse(d)}catch(a){return d}},remove:function(b){a()&&k(b)},supported:function(){return a()},flush:function(){a()&&j(function(a){k(a)})},flushExpired:function(){a()&&j(function(a){l(a)})},setBucket:function(a){t=a},resetBucket:function(){t=""},enableWarnings:function(a){u=a}};return v});